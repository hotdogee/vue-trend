(function(e,h){typeof exports=="object"&&typeof module<"u"?module.exports=h(require("vue")):typeof define=="function"&&define.amd?define(["vue"],h):(e=typeof globalThis<"u"?globalThis:e||self,e.VueTrend=h(e.Vue))})(this,function(e){"use strict";function h(n){return parseInt(n.toString(),10)}function k(n,t,a){return n.x===t.x&&n.y===t.y||t.x===a.x&&t.y===a.y?!0:h(n.x+a.x)===h(2*t.x)&&h(n.y+a.y)===h(2*t.y)}function p(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function x(n,t,a){const i={x:n.x-t.x,y:n.y-t.y},r=Math.sqrt(i.x*i.x+i.y*i.y);if(r===0)return{...t};const d={x:i.x/r,y:i.y/r};return{x:t.x+d.x*a,y:t.y+d.y*a}}function D(n,{minX:t,minY:a,maxX:i,maxY:r},{max:d,min:o}){const l=n.map(m=>typeof m=="number"?m:m.value),c=Math.min(...l,o)-.001,f=Math.max(...l,d)+.001,s=(i-t)/(l.length-1),u=(r-a)/(f-c),y=Number.isFinite(u)?u:0;return l.map((m,g)=>({x:g*s+t,y:r-(m-c)*y+(g===l.length-1?-1e-5:0)+(g===0?1e-5:0)}))}function B(n,t){if(n.length<2)return"";const a=[...n],i=a.shift();return`M${i.x} ${i.y}`+a.map((r,d)=>{const o=a[d+1],l=a[d-1]||i,c=o&&k(l,r,o);if(!o||c)return`L${r.x} ${r.y}`;const f=Math.min(p(l,r),p(o,r)),s=Math.min(t,f/2),u=x(l,r,s),y=x(o,r,s);return`L${u.x} ${u.y}S${r.x} ${r.y} ${y.x} ${y.y}`}).join("")}const _=["id","x1","y1","x2","y2"],V=["offset","stop-color"],T=e.defineComponent({__name:"TrendGradient",props:{gradient:{default:()=>["#000"]},gradientDirection:{default:"top"},id:{}},setup(n){const t=n,a=e.computed(()=>[...t.gradient].reverse()),i=e.computed(()=>+(t.gradientDirection==="left")),r=e.computed(()=>+(t.gradientDirection==="top")),d=e.computed(()=>+(t.gradientDirection==="right")),o=e.computed(()=>+(t.gradientDirection==="bottom")),l=c=>{const f=a.value.length-1||1;return c/f};return(c,f)=>(e.openBlock(),e.createElementBlock("defs",null,[e.createElementVNode("linearGradient",{id:t.id,x1:i.value,y1:r.value,x2:d.value,y2:o.value},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,(s,u)=>(e.openBlock(),e.createElementBlock("stop",{key:u,offset:l(u),"stop-color":s},null,8,V))),128))],8,_)]))}}),b=["d","stroke"],M=e.defineComponent({__name:"TrendPath",props:{data:{},boundary:{},id:{},smooth:{type:Boolean,default:!1},radius:{default:10},max:{default:-1/0},min:{default:1/0}},setup(n){const t=n,a=e.computed(()=>{if(!t.data||t.data.length<2)return"";const r=D(t.data,t.boundary,{max:t.max,min:t.min});return B(r,t.smooth?t.radius:0)}),i=e.computed(()=>`url(#${t.id})`);return(r,d)=>(e.openBlock(),e.createElementBlock("path",{d:a.value,fill:"none",stroke:i.value},null,8,b))}}),E=["width","height","viewBox"],w=e.defineComponent({__name:"VueTrend",props:{data:{},autoDraw:{type:Boolean,default:!1},autoDrawDuration:{default:2e3},autoDrawEasing:{default:"ease"},gradient:{default:()=>["#000"]},gradientDirection:{default:"top"},max:{default:-1/0},min:{default:1/0},height:{default:"100%"},width:{default:"100%"},viewHeight:{default:75},viewWidth:{default:300},padding:{default:8},radius:{default:10},smooth:{type:Boolean,default:!1}},setup(n){const t=n,a=e.ref(null),i=e.computed(()=>`vue-trend-${Math.random().toString(36).substring(7)}`),r=e.computed(()=>({minX:t.padding,minY:t.padding,maxX:t.viewWidth-t.padding,maxY:t.viewHeight-t.padding})),d=e.ref(0);return e.watch(()=>t.data,async(o,l)=>{var c,f;if(t.autoDraw&&JSON.stringify(o)!==JSON.stringify(l)){if(await e.nextTick(),typeof window>"u"||!((c=a.value)!=null&&c.$el))return;const s=a.value.$el,u=s.getTotalLength();isNaN(u)?console.warn("VueTrend: Could not get path length for autoDraw animation."):(s.style.transition="none",s.style.strokeDasharray=`${u} ${u}`,s.style.strokeDashoffset=Math.abs(u-(d.value||0)).toString(),s.getBoundingClientRect(),s.style.transition=`stroke-dashoffset ${t.autoDrawDuration}ms ${t.autoDrawEasing}`,s.style.strokeDashoffset="0",d.value=u)}else if(!t.autoDraw&&((f=a.value)!=null&&f.$el)){const s=a.value.$el;s.style.transition="",s.style.strokeDasharray="",s.style.strokeDashoffset="",d.value=0}},{immediate:!0,deep:!0}),(o,l)=>o.data&&o.data.length>=2?(e.openBlock(),e.createElementBlock("svg",{key:0,width:o.width,height:o.height,viewBox:`0 0 ${o.viewWidth} ${o.viewHeight}`},[e.createVNode(T,{id:i.value,gradient:o.gradient,"gradient-direction":o.gradientDirection},null,8,["id","gradient","gradient-direction"]),e.createVNode(M,{ref_key:"pathRef",ref:a,data:o.data,boundary:r.value,smooth:o.smooth,radius:o.radius,id:i.value,max:o.max,min:o.min},null,8,["data","boundary","smooth","radius","id","max","min"])],8,E)):e.createCommentVNode("",!0)}}),N=n=>{n.component("VueTrend",w)},$=w;return $.install=N,$});
//# sourceMappingURL=vue3-trend.umd.cjs.map
